!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=485)}({2:function(module,__webpack_exports__,__webpack_require__){"use strict";function getXMLHttpRequest(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else for(var t=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0,o=t.length;n<o;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e}function load(options){var method=options.method,url=options.url,content=options.content,successCallback=options.successCallback,failureCallback=options.failureCallback,headers=options.headers,xhr=getXMLHttpRequest();function ensureReadiness(){if(!(xhr.readyState<4))if(xhr.status<200||xhr.status>=300){if(400===xhr.status){var _content=xhr.response,_contentType=xhr.getResponseHeader("Content-Type");if(_contentType.indexOf("application/json")>-1&&(_content=JSON.parse(_content),("invalid_password"===_content.code||"token_expired"===_content.code)&&obj.refreshToken&&!options.retry))return void obj.refreshToken(function(e){options.retry=!0,obj.token=e,load(options)})}failureCallback&&failureCallback(xhr)}else if(4===xhr.readyState){var contentType=xhr.getResponseHeader("Content-Type");"application/javascript"===contentType?successCallback&&successCallback(eval(xhr.response),xhr):contentType.indexOf("application/json")>-1?successCallback&&successCallback(JSON.parse(xhr.response),xhr):successCallback&&successCallback(xhr.response,xhr)}}if(xhr.onreadystatechange=ensureReadiness,xhr.open(method,obj.host+url,!0),headers)for(var i in headers)xhr.setRequestHeader(i,headers[i]);xhr.setRequestHeader("Authorization","Basic "+btoa("agent:"+obj.token)),xhr.send(content)}function get(e,t,n,o){var a=serializeParams(t);a&&(-1===e.indexOf("?")?e+="?"+a:e+="&"+a),load({method:"GET",url:e,successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},failureCallback:o})}function post(e,t,n,o){load({method:"POST",url:e,headers:{"Content-type":"application/x-www-form-urlencoded"},content:serializeParams(t),successCallback:n,failureCallback:o})}function postJSON(e,t,n,o){load({method:"POST",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}function put(e,t,n,o){load({method:"PUT",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}function del(e,t,n,o){load({method:"DELETE",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}var obj={get:get,post:post,postJSON:postJSON,put:put,delete:del,token:"",host:"",refreshToken:null};function serializeParams(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t=t.join("&")}__webpack_exports__.a=obj},485:function(e,t,n){"use strict";n.r(t);var o=n(2);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"tokenInit",value:function(e,t,n){o.a.token=e,o.a.host="https://"+t+".udesk.cn",o.a.refreshToken=n}},{key:"_updateAgentWorkState",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r,i={};void 0!==n&&(i.cc_custom_state_id=n),i.agent_work_state=t,i.agent_no=e,o.a.post("/agent_api/v1/callcenter/agents/update_agent_work_state",i,function(e){switch(e.code){case 1e3:a(e);break;default:s(e)}},function(e){s(e)})}},{key:"setMonitorWorkStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;this._updateAgentWorkState(e,t,void 0,n,o)}},{key:"setMonitorWorkRestingStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;this._updateAgentWorkState(e,"resting",t,n,o)}},{key:"setMonitorAgentWorkWay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;o.a.post("/agent_api/v1/callcenter/agents/update_agent_work_way",{agent_no:e,agent_work_way:t},function(e){switch(e.code){case 1e3:n(e);break;default:a(e)}},function(e){a(e)})}},{key:"monitorAgentListening",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;o.a.post("/agent_api/v1/callcenter/desktop/listeing",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}},{key:"monitorAgentInterpose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;o.a.post("/agent_api/v1/callcenter/desktop/interpose",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}},{key:"monitorAgentSubstitute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;o.a.post("/agent_api/v1/callcenter/desktop/substitute",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}}])&&a(t.prototype,n),s&&a(t,s),e}();window.callAPI=new s}});